<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Kelvin Harron</title><description>Rambling about iOS Development</description><link>https://kelvinharron.com</link><language>en</language><lastBuildDate>Thu, 14 Mar 2024 22:57:48 +0000</lastBuildDate><pubDate>Thu, 14 Mar 2024 22:57:48 +0000</pubDate><ttl>250</ttl><atom:link href="https://kelvinharron.com/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://kelvinharron.com/posts/netlify-pubish</guid><title>Hosting a Swift Publish blog on Netlify</title><description>Because Jekyll and GitHub Pages are too fiddly!</description><link>https://kelvinharron.com/posts/netlify-pubish</link><pubDate>Sat, 3 Feb 2024 22:10:00 +0000</pubDate><content:encoded><![CDATA[<h1>Hosting a Swift Publish blog on Netlify</h1><p><a href="https://pages.github.com/">GitHub Pages is excellent</a>. You get free hosting of HTML-based websites, and you can extend that with <a href="https://jekyllrb.com/">Jekyll</a>, transforming markdown files into feature-rich and pleasing-looking pages. Using these together is the approach I took two years ago with my first attempt at blogging.</p><p>When I decided to try again, I gave up on the first steps. The ruby version on my Mac needed to be newer to use the Jekyll template I had previously used, and between Cocaopods and Appium, I haven't had a great time with Gems or Ruby.</p><p>That's when I remembered that John Sundell created Publish!</p><h2>What is Publish?</h2><p><a href="https://github.com/JohnSundell/Publish">Publish</a></p><blockquote><p>Welcome to Publish, a static site generator built specifically for Swift developers. It enables entire websites to be created using Swift and supports themes, plugins and many other powerful customization options.</p></blockquote><p>I have worked exclusively in iOS for the last eight months and enjoy working with Swift (less so with Xcode). Using Swift to help generate web pages from markdown with Swift configuring the themes and functionality is a no-brainer.</p><h3>Getting Started with Publish</h3><p>Please note that my git usage caused me to üí• <a href="https://github.com/kelvinharron/kelvinharron.com">the existing repo for my website</a> and replace it with a Publish project. I didn't care about the old blog posts, but I recommend backing up your existing blog if you are trying to do the same!</p><p>I followed the excellent tutorial by <a href="https://www.danijelavrzan.com/posts/2022/06/create-portfolio-website-using-publish/">Danijela Vrzan</a> to get started and used the default Publish template to feel my way around the Swift code which defines a lot of base content in <code>main.swift</code>.</p><h2>Why did you move from GitHub Pages?</h2><p>The ü•ä with this code block:</p><pre><code><span class="comment">// This will generate your website using the built-in Foundation theme:</span>
<span class="keyword">try</span> <span class="type">KelvinHarron</span>().<span class="call">publish</span>(using: [
    .<span class="call">addMarkdownFiles</span>(),
    .<span class="call">copyResources</span>(),
    .<span class="call">generateSiteMap</span>(),
    .<span class="call">generateHTML</span>(withTheme: .<span class="dotAccess">foundation</span>),
    .<span class="call">unwrap</span>(.<span class="call">gitHub</span>(<span class="string">"kelvinharron/kelvinharron.com"</span>, branch: <span class="string">"master"</span>, useSSH: <span class="keyword">true</span>), <span class="type">PublishingStep</span>.<span class="property">deploy</span>)
])
</code></pre><p>You see, running <code>publish deploy</code> uses the value set in the <code>.unwrap</code> function to push the contents of the <code>Output</code> directory, your actual website that should be hosted. I didn't understand the workflow here, and GitHub Pages did want to host it on my custom domain. After some Googling and <a href="https://www.reddit.com/r/swift/comments/za11zu/comment/izjzl9q/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button">discovering that it won't work with the default theme</a> meant I had the choice of making a custom theme or looking for an alternative means to host.</p><p>After reading <a href="https://www.kprow.com/projects/swift-static-website-generator/">Kprow's blog</a>, I settled on Netlify as a host.</p><h2>Configuring Netlify as a Host</h2><p>The onboarding experience here is superb. Of course, it went wrong because I naively assumed I could ignore the <code>Output</code> directory where Publish places your generated website, but this failed.</p><p>Another issue I was surprised to solve easily was that Netlify, by default, installs Swift 5.4, but the latest version of Publish uses <code>// swift-tools-version:5.5</code>. To fix this on Netlify, &gt; Go to Your Website -&gt; Site Configuration -&gt; Environment variables -&gt; add <code>SWIFT_VERSION</code> and set the value to <code>5.5</code>. Done!</p><p>If you went through the onboarding successfully, Netlify will build your main branch on change and publish it to a <code>netlify.app</code> domain. Almost there!</p><h2>Configure your custom domain to Netlify</h2><p>If you want to use <code>yourname.com</code> instead of <code>yourname.netlify.app</code> or the like, you must purchase your domain. I used <a href="https://www.namesilo.com/">NameSilo</a> to do this.</p><h3>Setting the A and CNAME DNS</h3><p>To let Netlify host on <code>yourname.com</code> or equivalent, tell your domain host about Netlify. To do this for NameSilo, access the <a href="https://www.namesilo.com/account_domain_manage_dns.php">Manage DNS page</a> and set the <code>A</code> type to the IP address Netlify gives in its setup, and <code>apex-loadbalancer.netlify.com</code> for the <code>CNAME</code> type for the www. part of your website. It can take 15+ minutes for the changes to propagate, and when done correctly, Netlify will acknowledge it under its Production domains. ‚úÖ</p><p>Now you're flying! While this is a high-level summary, I plan to record the flow end to end as an exercise and a good introduction for me on streaming. If you get stuck at any point, please get in touch via Twitter / X, and I'll be happy to help!</p>]]></content:encoded></item><item><guid isPermaLink="true">https://kelvinharron.com/posts/first-post</guid><title>First Post - Round 2</title><description>Here we go again!</description><link>https://kelvinharron.com/posts/first-post</link><pubDate>Sat, 3 Feb 2024 19:10:00 +0000</pubDate><content:encoded><![CDATA[<h1>First Post - Round 2</h1><p>In 2022, I thought it would be a good idea to blog about my experience as a software engineer working across Android, iOS and anything new that would take my fancy.</p><p>It didn't go well! üòã I made three blog posts hosted on GitHub Pages, down to laziness and thinking, "What do I know compared to others?" I stopped. In December 2023, NameSilo notified me that kelvinharron.com was due to expire, so I figured I would try again.</p><h3>Why not Medium?</h3><p>When I see a Medium article, I scroll down and expect to be paying for the access. I am okay with paying for subscriptions, but the content quality on Medium has been hit-and-miss for me over the years, and I know folks in the industry with 'strong' and less kind opinions on anything Medium.</p><p>My next post will discuss how I migrated from Jekyll and GitHub Pages to John Sundell's Published and Netlify hosting. ü§ù</p>]]></content:encoded></item></channel></rss>